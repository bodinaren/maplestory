<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="MapleStory 2 Interactive Skill Charts let you share your build with anyone, either share a link or you can easily put them on your own website or blog. Choose any class from Archer, Assassin, Berserker, Heavy Gunner, Knight, Priest, Runeblade, Soul Binder, Striker, Thief, Wizard.">
    <meta name="keywords" content="maplestory 2 interactive skill charts,maplestory 2,maplestory 2 skills,skills,skill charts,interactive skill charts,archer,assassin,berserker,heavy gunner,knight,priest,runeblade,soul binder,striker,thief,wizard">
    <title>Maplestory 2 Interactive Skill Charts</title>

    <style>
      body {
        font-family: Verdana;
        font-size: .8em;
        background-color: #292929;
        color: white;
        line-height: 1.6em;
      }

      h1 { margin-top: 50px; }
      h2 { margin-top: 30px; }
      a { color: white; }

      blockquote {
        font-style: italic;
        padding: 5px 5px 5px 10px;
        border-left: 3px solid white;
        margin-left: 10px;
      }

      .container { margin: auto; max-width: 1000px; }
      .logo { display: block; text-align: center; }
      
      #toggles {
        text-align: center;
        margin: 0 0 30px;
      }
      #toggles a {
        color: white;
        text-decoration: none;
        display: inline-flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }
      #toggles a > * { margin: 5px; }
      #toggles a:not(.active) picture.active { display: none; }
      #toggles a.active picture.inactive { display: none; }
      #toggles img { width: 75px; }
    
      #toggles .unavailable { color: #666; }
      #toggles .unavailable:after {
        content: 'X';
        color: #999;
        font-size: 96px;
        position: absolute;
        width: 100%;
        z-index: 1;
        margin-top: -10px;
      }
      #toggles .active.unavailable:after { color: red; }

      #chartHolder { height: 785px; }
      #editors { max-width: 928px; margin: auto; }
      
      #remaining {
        margin-top: 5px;
        display: flex;
        font-family: Roboto, Verdana;
      }
      #remaining > * { margin-right: 5px; }
      #remaining .points {
        color: #dcc134;
        font-size: 1.3rem;
      }

      ms-extra-outlet { display: block; }

      code {
        background-color: black;
        color: white;
        font-size: 1rem;
        margin: 1em 0;
        padding: 2px;
      }
      code.block {
        display: block;
        box-sizing: border-box;
        width: 100%;
        min-height: 110px;
        padding: 5px;
      }
      pre {
        font-size: 1rem;
        background-color: black;
        padding: 0 5px 5px;
        overflow-x: auto;
      }

      dl {
        padding-left: 10px;
      }
      dl > * {
        border-left: 3px solid #ccc;
        padding: 3px 0 3px 20px;
      }
      dl dt:not(:first-child) { margin-top: 15px; }
      dl dt {
        font-weight: bold;
      }
      dl dd {
        margin-left: 0;
        margin-bottom: 5px;
      }
      dl pre {
        margin-left: 20px;
      }

      #links {
        position: absolute;
        top: 0;
        right: 0;
        padding-right: 20px;
        list-style-type: none;
      }
    </style>

  </head>
  <body>

    <div class="container">

      <ul id="links">
        <li><a href="https://github.com/bodinaren/maplestory-skills">GitHub</a>
        <li><a href="https://twitter.com/htbodin">Twitter</a></li>
      </ul>
  
      <picture class="logo">
        <source srcset="assets/logo.webp" type="image/webp">
        <img src="assets/logo.png">
      </picture>
      
      <h1>Welcome to the MapleStory 2 Interactive Skill Charts</h1>
      
      <p>
        MapleStory 2 Interactive Skill Charts is a set of web components which, with very little effort,
        let you add an interactive skill chart to your website or blog.
        This way your viewers can interact with the chart and see exactly what bonuses your chosen skill gives.
        So much better than just a screenshot!
      </p>

      <p>
        Select a class and the skills you want to show and then copy the code above the skill chart into your site or blog.
      </p>
      
      <blockquote style="color: red;">
        Awakening is upon us.
        The charts are ready, but I still don't know the damage and other values of each individual skill level.
        If you know these values and want to help,
        <a href="https://www.github.com/bodinaren/maplestory-skills/issues">please contact me here</a>.
        Thank you, and enjoy!
      </blockquote>

      <br />
    
      <p id="toggles">
        <a href="javascript:void(0)" ms-class="archer" onclick="toggle('archer')">
          <picture class="active">
            <source srcset="assets/archer.webp" type="image/webp">
            <img src="assets/archer.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/archer_bw.webp" type="image/webp">
            <img src="assets/archer_bw.png">
          </picture>
          Archer
        </a>
        <a href="javascript:void(0)" ms-class="assassin" onclick="toggle('assassin')">
          <picture class="active">
            <source srcset="assets/assassin.webp" type="image/webp">
            <img src="assets/assassin.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/assassin_bw.webp" type="image/webp">
            <img src="assets/assassin_bw.png">
          </picture>
          Assassin
        </a>
        <a href="javascript:void(0)" ms-class="berserker" onclick="toggle('berserker')">
          <picture class="active">
            <source srcset="assets/berserker.webp" type="image/webp">
            <img src="assets/berserker.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/berserker_bw.webp" type="image/webp">
            <img src="assets/berserker_bw.png">
          </picture>
          Berserker
        </a>
        <a href="javascript:void(0)" ms-class="heavy-gunner" onclick="toggle('heavy-gunner')">
          <picture class="active">
            <source srcset="assets/heavy-gunner.webp" type="image/webp">
            <img src="assets/heavy-gunner.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/heavy-gunner_bw.webp" type="image/webp">
            <img src="assets/heavy-gunner_bw.png">
          </picture>
          Heavy Gunner
        </a>
        <a href="javascript:void(0)" ms-class="knight" onclick="toggle('knight')">
          <picture class="active">
            <source srcset="assets/knight.webp" type="image/webp">
            <img src="assets/knight.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/knight_bw.webp" type="image/webp">
            <img src="assets/knight_bw.png">
          </picture>
          Knight
        </a>
        <a href="javascript:void(0)" ms-class="priest" onclick="toggle('priest')">
          <picture class="active">
            <source srcset="assets/priest.webp" type="image/webp">
            <img src="assets/priest.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/priest_bw.webp" type="image/webp">
            <img src="assets/priest_bw.png">
          </picture>
          Priest
        </a>
        <a href="javascript:void(0)" ms-class="runeblade" onclick="toggle('runeblade')">
          <picture class="active">
            <source srcset="assets/runeblade.webp" type="image/webp">
            <img src="assets/runeblade.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/runeblade_bw.webp" type="image/webp">
            <img src="assets/runeblade_bw.png">
          </picture>
          Runeblade
        </a>
        <a href="javascript:void(0)" ms-class="soul-binder" onclick="toggle('soul-binder')">
          <picture class="active">
            <source srcset="assets/soul-binder.webp" type="image/webp">
            <img src="assets/soul-binder.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/soul-binder_bw.webp" type="image/webp">
            <img src="assets/soul-binder_bw.png">
          </picture>
          Soul Binder
        </a>
        <a href="javascript:void(0)" ms-class="striker" onclick="toggle('striker')">
          <picture class="active">
            <source srcset="assets/striker.webp" type="image/webp">
            <img src="assets/striker.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/striker_bw.webp" type="image/webp">
            <img src="assets/striker_bw.png">
          </picture>
          Striker
        </a>
        <a href="javascript:void(0)" ms-class="thief" onclick="toggle('thief')">
          <picture class="active">
            <source srcset="assets/thief.webp" type="image/webp">
            <img src="assets/thief.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/thief_bw.webp" type="image/webp">
            <img src="assets/thief_bw.png">
          </picture>
          Thief
        </a>
        <a href="javascript:void(0)" ms-class="wizard" onclick="toggle('wizard')">
          <picture class="active">
            <source srcset="assets/wizard.webp" type="image/webp">
            <img src="assets/wizard.png">
          </picture>
          <picture class="inactive">
            <source srcset="assets/wizard_bw.webp" type="image/webp">
            <img src="assets/wizard_bw.png">
          </picture>
          Wizard
        </a>
      </p>

      <div id="editors">
        <fieldset>
          <legend>Settings</legend>
          <p>
            <input type="checkbox" id="chkExtras" />
            <label for="chkExtras">Add extra info. (E.g. when a Runeblade's Sigil or Thief's cunning is active. Not yet available for Awakening.)</label>
          </p>
        </fieldset>

        <code class="block" id="code">
&lt;script src="https://unpkg.com/maplestory-skills@^2/dist/maplestory-skills/maplestory-skills.esm.js" type="module"&gt;&lt;/script&gt;<br />
&lt;script src="https://unpkg.com/maplestory-skills@^2/dist/maplestory-skills/maplestory-skills.js" nomodule&gt;&lt;/script&gt;
        </code>

        <div id="chartHolder"></div>

        <div id="remaining">
          <span>Remaining Skill Points:</span>
          <span class="points"></span>
        </div>

        <p><i>
          What you see above is the editor mode.
          When you the code above the skills will no longer be editable,
          and you won't see the Remaining Skill Points.
          For information on how to add these features please visit
          the <a href="https://github.com/bodinaren/maplestory-skills">GitHub repository</a>.
        </i></p>
  
      </div>

      <h2 id="faq">FAQ</h2>
      <dl>
        <dt>The skill charts are too big/small!</dt>
        <dd>
          The chart automatically adjust to the size of it's container,
          but if you still wish to change the size you can do so with CSS transformations.
          <pre>
ms-archer, ms-assassin, ms-berserker, ms-heavy-gunner, ms-knight,
ms-priest, ms-runeblade, ms-striker, ms-thief, ms-wizard
{
  transform: scale(0.8);              /* adapt margin below if you change this */
  transform-origin: top center;       /* or "top left" if you don't wanna center it */
  margin-bottom: calc(-770px * 0.2);  /* to remove empty space at the bottom, or */
  margin-right: calc(-815px * 0.2);   /* if you use "top left" for transform-origin */
}</pre>
        </dd>

        <dt>Can I use this editor on my site too?</dt>
        <dd>
          Yes, you can. Please visit the <a href="https://github.com/bodinaren/maplestory-skills">GitHub repository</a> for more information.
        </dd>

        <dt>Found a bug or have other questions?</dt>
        <dd>
          Don't hesitate to open a new issue in the
          <a href="https://www.github.com/bodinaren/maplestory-skills/issues">Issue Tracker</a>.
        </dd>
      </dl>
    </div>

    <script>
      var toggles = document.querySelectorAll("#toggles > a");
      var chkExtras = document.getElementById("chkExtras");

      function toggle(msClass, firstSetup) {
        for (var prop in toggles) {
          if (toggles.hasOwnProperty(prop))
            toggles[prop].classList.remove("active");
        }

        document.querySelector("[ms-class='" + msClass + "']").classList.add("active");

        var chartHolder = document.querySelector("#chartHolder");
        var outletHolder = document.querySelector("#code");
        var counterHolder = document.querySelector("#remaining .points");
        
        var chart = chartHolder.firstElementChild;
        var outlet = outletHolder.querySelector("ms-extra-outlet");
        var counter = counterHolder.firstElementChild;

        // create new editor for the new class.
        if (chart) chart.remove();
        chart = document.createElement("ms-" + msClass);
        chart.rank = 2;
        chart.editable = true;
        chart.extras = chkExtras.checked;
        chartHolder.appendChild(chart);

        // re-create the outlet so it can attach to the new editor.
        if (outlet) outlet.remove();
        outletHolder.appendChild(document.createElement("ms-extra-outlet"));

        // re-create the counter so it can attach to the new editor.
        if (counter) counter.remove();
        counterHolder.appendChild(document.createElement("ms-extra-counter"));

        if (!firstSetup) {
          location.hash = "";
        }

        chart.addEventListener("skillchanged", function(evt) {
          location.hash = getHash(chart, evt.detail.skills);
        });

        return customElements.whenDefined("ms-" + msClass).then(function() {
          return chart;
        });
      }

      function getHash(chart, skills) {
        var msClass = chart.tagName.toLowerCase().replace("ms-", "");
        var hash = [msClass, chart.rank]
                    .concat(skills.map(function(x) { return x.level; }))
                    .join(",")

        if (msClass === "runeblade") {
          if (chart.extras) hash += "," + (chart.sigil || 1);
          else hash += ",0";
        } else hash += "," + (chart.extras ? 1 : 0);
        
        return hash;
      }

      function init() {
        var q = location.hash.replace("#", "").split(",");

        if (q.length > 1) {
          toggle(q[0], true).then(function(chart) {

            chart.getData().then(function(data) {
              var skills = data.skills;
              for (var i = 0; i < skills.length; i++) {
                var skill = skills[i];
                chart[skill.prop] = Math.min(Math.max(skill.minLevel, q[i+2] || skill.level), skill.maxLevel);
              }
            });

            if (q.length > 20) {
              chart.rank = q[1];
              if (q[0] === "runeblade") {
                if (q[28] !== "0") chart.extras = chkExtras.checked = true;
                if (q[28] !== "1") chart.sigil = q[28]; // means it's the name of a sigil
              } else {
                chart.extras = chkExtras.checked = !!parseInt(q[28]);
              }
            }

            setTimeout(function() {
              window.scrollTo(0, chart.offsetTop - 20);
            }, 300);
          });
        } else {
          toggle("archer");
        }
      }

      chkExtras.addEventListener("change", function(val) {
        var chartHolder = document.querySelector("#chartHolder");
        chartHolder.children[0].extras = chkExtras.checked;
      });
    </script>

    <script type="module" src="./dist/maplestory-skills/maplestory-skills.esm.js" onload="init()"></script>
    <script nomodule src="./dist/maplestory-skills/maplestory-skills.js" onload="init()"></script>

  </body>
</html>
