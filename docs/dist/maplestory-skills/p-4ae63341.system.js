System.register(["./p-d669889f.system.js","./p-eaa00cab.system.js"],function(e){"use strict";var i,r,l,n;return{setters:[function(e){i=e.h},function(e){r=e.R;l=e.M;n=e.a}],execute:function(){e({p:s,r:o,t:a});function s(e,i,s,t){var o={};var a=0;var p=0;if(t&&e[t.prop]>0){if(t.skillRequirements){t.skillRequirements.forEach(function(i){f(e,i)})}}Object.keys(i).forEach(function(l){var n=i[l];if(n.rank===r.Basic){a+=e[n.prop]}else{p+=e[n.prop]}o[n.prop]={locked:false,required:undefined,limitReached:false}});if(!s){if(t&&t.rank===r.Basic&&a>l){e[t.prop]-=a-l}if(t&&t.rank===r.Awakening&&p>n){e[t.prop]-=p-n}}Object.keys(i).forEach(function(t){var f=i[t];if(f.skillRequirements){f.skillRequirements.forEach(function(i){if(e[i.skill.prop]<i.level){o[f.prop].locked=true;e[f.prop]=0}})}if(!s){if(f.rank===r.Basic){o[f.prop].limitReached=a>=l}else{o[f.prop].limitReached=p>=n}if(e[f.prop]===0){var c=u(e,f);if(f.rank===r.Basic){if(c+1>l-a){o[f.prop].limitReached=true}}else{if(c+1>n-p){o[f.prop].limitReached=true}}}}});e.skills=o}function t(e,i,r){if(i.skillRequirements){var l=false;i.skillRequirements.forEach(function(i){if(e[i.skill.prop]<i.level){var n=r?"Level "+i.level+"+":undefined;if(e.skills[i.skill.prop].required!==n){e.skills[i.skill.prop].required=n;l=true}}});if(l)e.skills=Object.assign({},e.skills)}}function o(e,l,n,s,o,a){if(s===void 0){s=false}if(o===void 0){o=r.Basic}return Object.keys(l).map(function(r){var f=l[r];var u=e.skills[f.prop];return i("ms-skill",Object.assign({slot:"rank-"+o,class:f.prop,skill:f,level:e[f.prop],locked:u.locked,required:u.required,limitReached:u.limitReached,disabled:!n,loop:n,onLevelchanged:function(i){return e.levelChanged(f,i.detail)},onMouseEnter:function(){return u.locked&&t(e,f,true)},onMouseLeave:function(){return u.locked&&t(e,f,false)},extras:s},a))})}function a(e,i,r){var l={rank:e.rank,skills:Object.keys(i).map(function(r){var l=i[r];return{skill:l.name,attr:l.attr,prop:l.prop,level:e[l.prop],minLevel:l.minLevel,maxLevel:l.maxLevel,rank:l.rank}})};if(r){l.other=Object.keys(r).map(function(e){return{attr:e,value:r[e]}})}return l}function f(e,i){if(e[i.skill.prop]<i.level){e[i.skill.prop]=i.level}if(i.skill.skillRequirements){i.skill.skillRequirements.forEach(function(i){f(e,i)})}}function u(e,i){var r={};if(!i.skillRequirements)return 0;n(i);var l=Object.keys(r).reduce(function(e,i){return e+r[i]},0);return l;function n(i){i.skillRequirements.forEach(function(i){var l=Math.max(0,i.level-e[i.skill.prop]);if(!r[i.skill.prop]||r[i.skill.prop]<l){r[i.skill.prop]=l}if(i.skill.skillRequirements)n(i.skill)})}}}}});