System.register(["./p-a868d0a0.system.js","./p-832ce77e.system.js"],function(e,i){"use strict";var r,l,n,s;return{setters:[function(e){r=e.d},function(e){l=e.a;n=e.b;s=e.c}],execute:function(){e({a:i,b:a,c:o});function i(e,i,r,t){var o={};var a=0;var f=0;if(t&&e[t.prop]>0){if(t.skillRequirements){t.skillRequirements.forEach(function(i){c(e,i)})}}Object.keys(i).forEach(function(r){var n=i[r];if(n.rank===l.Basic){a+=e[n.prop]}else{f+=e[n.prop]}o[n.prop]={locked:false,required:undefined,limitReached:false}});if(!r){if(t&&t.rank===l.Basic&&a>n){e[t.prop]-=a-n}if(t&&t.rank===l.Awakening&&f>s){e[t.prop]-=f-s}}Object.keys(i).forEach(function(t){var c=i[t];if(c.skillRequirements){c.skillRequirements.forEach(function(i){if(e[i.skill.prop]<i.level){o[c.prop].locked=true;e[c.prop]=0}})}if(!r){if(c.rank===l.Basic){o[c.prop].limitReached=a>=n}else{o[c.prop].limitReached=f>=s}if(e[c.prop]===0){var p=u(e,c);if(c.rank===l.Basic){if(p+1>n-a){o[c.prop].limitReached=true}}else{if(p+1>s-f){o[c.prop].limitReached=true}}}}});e.skills=o}function t(e,i,r){if(i.skillRequirements){var l=false;i.skillRequirements.forEach(function(i){if(e[i.skill.prop]<i.level){var n=r?"Level "+i.level+"+":undefined;if(e.skills[i.skill.prop].required!==n){e.skills[i.skill.prop].required=n;l=true}}});if(l)e.skills=Object.assign({},e.skills)}}function o(e,i,n,s,o,a){if(s===void 0){s=false}if(o===void 0){o=l.Basic}return Object.keys(i).map(function(l){var c=i[l];var u=e.skills[c.prop];return r("ms-skill",Object.assign({slot:"rank-"+o,class:c.prop,skill:c,level:e[c.prop],locked:u.locked,required:u.required,limitReached:u.limitReached,disabled:!n,loop:n,onLevelchanged:function(i){return e.levelChanged(c,i.detail)},onMouseEnter:function(){return u.locked&&t(e,c,true)},onMouseLeave:function(){return u.locked&&t(e,c,false)},extras:s},a))})}function a(e,i,r){var l={rank:e.rank,skills:Object.keys(i).map(function(r){var l=i[r];return{skill:l.name,attr:l.attr,prop:l.prop,level:e[l.prop],minLevel:l.minLevel,maxLevel:l.maxLevel,rank:l.rank}})};if(r){l.other=Object.keys(r).map(function(e){return{attr:e,value:r[e]}})}return l}function c(e,i){if(e[i.skill.prop]<i.level){e[i.skill.prop]=i.level}if(i.skill.skillRequirements){i.skill.skillRequirements.forEach(function(i){c(e,i)})}}function u(e,i){var r={};if(!i.skillRequirements)return 0;n(i);var l=Object.keys(r).reduce(function(e,i){return e+r[i]},0);return l;function n(i){i.skillRequirements.forEach(function(i){var l=Math.max(0,i.level-e[i.skill.prop]);if(!r[i.skill.prop]||r[i.skill.prop]<l){r[i.skill.prop]=l}if(i.skill.skillRequirements)n(i.skill)})}}}}});